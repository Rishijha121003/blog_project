{% extends 'blog/base.html' %}
{% block title %}All Blog Posts{% endblock %}

{% block content %}
<div style="display: flex;" class="ghost-hero">
  <!-- Filter Sidebar -->
  <aside style="width: 250px; padding: 100px; border-right: 1px solid #ddd;">
    <h3>Filters</h3>
    <form method="get">
      {% for value, label in categories.items %}
        <label>
            <input type="checkbox" name="category" value="{{ value }}"
                   {% if value in selected_categories %}checked{% endif %}>
            {{ label }}
           </label><br>
         {% endfor %}
        <br>
       <button type="submit">Apply Filters</button>
      </form>
  </aside>

  <!-- Blog Posts Section -->
  <main style="flex-grow: 4; padding: 10px;" class="ghost-hero">
    <h2>Blog Posts</h2>
    {% for post in posts %}
      <div style="border: 1px solid #ccc; margin-bottom: 15px; padding: 10px;">
        <h3>{{ post.title }}</h3>
        <p><strong>Category:</strong> {{ post.get_category_display }}</p>
        
        {% if post.image %}
          <img src="{{ post.image.url }}" alt="Blog Image" style="max-width:300px;">
        {% endif %}

        <!-- Render rich text content safely with formatting -->
        <div class="post-content">
          {{ post.content|safe|truncatewords:25 }}
        </div>

        <a href="{% url 'edit_blog' post.id %} " class="card">Edit</a> 
        <a href="{% url 'delete_blog' post.id %}" class="card">Delete</a>
        <a href="{% url 'post_detail' id=post.id %}"class= "card">Read More</a>  
      </div>
    {% empty %}
      <p>No posts found in this category.</p>
    {% endfor %}
  </main>
</div>
{% endblock %}